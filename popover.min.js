function OverlayPopover(a,b){this.container=$('<div class="overlay-popover-container">'+a+"</div>").css({position:"absolute",display:"block",width:"400px",height:"400px",cursor:"auto"});this.popover=$(this.container).children().first()[0];this.pixelOffset=34;this.panPadding=10;b&&b(this)}OverlayPopover.prototype=new google.maps.OverlayView;OverlayPopover.prototype.onAdd=function(){var a=$(this.container).get(0),b=$(this.container).children().first().get(0),c=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"];for(i=0;i<c.length;i++)google.maps.event.addDomListener(b,c[i],function(a){a.stopPropagation()});var d=this.getPanes();d.floatPane.appendChild(a)};OverlayPopover.prototype.onRemove=function(){$(this.container).remove()};OverlayPopover.prototype.draw=function(){var a=this.getProjection().fromLatLngToDivPixel(this.marker.getPosition()),b=this.getProjection().fromLatLngToContainerPixel(this.marker.getPosition());if(b){var c=b.x-$(this.popover).outerWidth()/2,d=b.y-$(this.popover).outerHeight()-this.pixelOffset;$(this.popover).data("x",c);$(this.popover).data("y",d);this.pan()}if(a){var c=a.x-$(this.container).outerWidth()/2,d=a.y-$(this.container).outerHeight()-this.pixelOffset;$(this.container).css({left:c,top:d})}};OverlayPopover.prototype.popoverBounds=function(){var a={x:$(this.popover).data("x"),y:$(this.popover).data("y"),w:$(this.popover).outerWidth(),h:$(this.popover).outerHeight()},b="x:"+a.x+" y:"+a.y+" w:"+a.w+" h:"+a.h;$("title").text(b);return a};OverlayPopover.prototype.pan=function(){var a,b=0,c=0;a=this.getMap();if(a instanceof google.maps.Map){var d=a.getDiv(),e=d.offsetWidth,f=d.offsetHeight,g=this.panPadding,h=this.popoverBounds();h.x<0?b=h.x-0-g:h.x+h.w>e&&(b=h.x+h.w-e+g);h.y<0&&(c=h.y-0-g);a.panBy(b,c)}};OverlayPopover.prototype.hide=function(){this.container&&this.container.hide();this.setMap(null)};OverlayPopover.prototype.show=function(a){this.marker=a;this.setMap(this.marker.getMap());if(this.container){this.container.show();this.pan()}};OverlayPopover.prototype.is_visible=function(){return $(this.container).is(":visible")};OverlayPopover.prototype.toggle=function(a){this.is_visible()?this.hide():this.show(a)};